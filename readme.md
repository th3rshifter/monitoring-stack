# Screenshots of monitoring & audit stack

<p align="center">
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/1.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/2.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/3.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/4.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/5.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/6.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/7.jpg" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/8.png" width="24%" />
  <img src="https://raw.githubusercontent.com/th3rshifter/monitoring-stack/main/audit-api/9.jpg" width="24%" />
</p>

## üß± –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å—Ç—ç–∫

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Linux (Ubuntu Server)
- Docker (Compose)

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- PostgreSQL ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π, –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –∏ –æ—Ç—á—ë—Ç–æ–≤ –∞—É–¥–∏—Ç–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
- Prometheus ‚Äî —Å–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- Alertmanager ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤
- Grafana ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤
- Node Exporter ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
- cAdvisor ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Loki ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ª–æ–≥–æ–≤
- Promtail ‚Äî —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–µ—Ç–∏
- Fail2Ban ‚Äî —Å–æ–±—ã—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ø–æ–¥–±–æ—Ä –ø–∞—Ä–æ–ª–µ–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
- Xray / X-UI ‚Äî —Å–µ—Ç–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

---

## ‚öô –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å

### Backend-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- FastAPI ‚Äî REST API –∏ Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏—Ç–∞ –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
- Uvicorn ‚Äî ASGI-—Å–µ—Ä–≤–µ—Ä

### –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- SQLAlchemy (async) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL
- asyncpg ‚Äî –¥—Ä–∞–π–≤–µ—Ä PostgreSQL

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏
- Pydantic v2 ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Alertmanager, —Å–æ–±—ã—Ç–∏—è)

### HTTP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- httpx ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ Prometheus –∏ Loki

### –®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è –∏ UI
- Jinja2 ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤
- Pandas ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤
- OpenPyXL ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç Excel (XLSX)

---

## üß© –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python
- asyncio ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- datetime ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –∏ –º–µ—Ç–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏
- dataclasses ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä UI
- contextlib ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- io ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–º—è—Ç–∏
- json, os, typing, urllib.parse

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è:
- —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ —Å–æ–±—ã—Ç–∏–π –∏ –ª–æ–≥–æ–≤ –ò–¢-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã;
- –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤;
- –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (–º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏);
- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ –¥–ª—è –∞—É–¥–∏—Ç–∞ –∏ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤.
- —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞:  
**—Å–æ–±—ã—Ç–∏–µ —Å –ò–° -> –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ -> –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è -> –∞–Ω–∞–ª–∏–∑ -> –æ—Ç—á—ë—Ç**.

---

## üîÑ –õ–æ–≥–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

1. Prometheus —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∞–Ω–æ–º–∞–ª–∏—é (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —É–∑–ª–∞ –∏ —Ç.–¥.).
2. Alertmanager —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ Audit API.
3. Audit API:
   - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ;
   - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç (incident_key - –Ω–æ–º–µ—Ä –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞);
   - —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ (1—á);
   - —Å–≤—è–∑—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏;
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—É.
4. –ò–Ω—Ü–∏–¥–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:
   - —á–µ—Ä–µ–∑ Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å;
   - –≤ –≤–∏–¥–µ JSON;
   - –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown;
   - –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel (XLSX).
